<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Aura Engine — Fractal, Player-Built Pipelines</title>
  <meta name="description" content="The inner & embodied self, infinitely observed, fractionalised, quantified, patterned by choice, externalised, and re-embodied. A web3, local-first, multimodal AI course builder where players design their own pipelines."/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;600;700&family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0b0d12;
      --panel:#0f121a80;           /* glass */
      --glass:#0f121acc;
      --txt:#e8eefc;
      --muted:#aab3c9;
      --brand:#7ae0ff;
      --brand-2:#9b8cff;
      --brand-3:#00ffa3;
      --error:#ff5577;
      --ok:#36d399;
      --card: 16px;
      --radius: 18px;
      --shadow: 0 10px 30px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.03);
      --border: 1px solid rgba(255,255,255,.08);
      --grad: conic-gradient(from 180deg at 50% 50%, rgba(122,224,255,.15), rgba(155,140,255,.15), rgba(0,255,163,.15), rgba(122,224,255,.15));
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:Inter,system-ui,Segoe UI,Roboto,Arial,Helvetica,sans-serif;
      color:var(--txt);
      background:
        radial-gradient(1200px 900px at 10% -10%,rgba(122,224,255,.12),transparent 60%),
        radial-gradient(900px 700px at 120% 10%,rgba(155,140,255,.10),transparent 55%),
        linear-gradient(180deg, #0a0c11, #0b0d12 30%, #0b0d12 70%, #090a0f);
      background-attachment: fixed;
      overflow-x:hidden;
    }
    /* nav */
    .nav{
      position:sticky; top:0; z-index:50;
      backdrop-filter:saturate(140%) blur(10px);
      background:linear-gradient(180deg, rgba(10,12,17,.7), rgba(10,12,17,.35));
      border-bottom:var(--border);
    }
    .wrap{max-width:1200px; margin:0 auto; padding:0 20px}
    .nav .in{display:flex; align-items:center; justify-content:space-between; height:64px}
    .brand{display:flex; gap:12px; align-items:center; text-decoration:none; color:var(--txt)}
    .brand .logo{
      width:34px;height:34px;border-radius:10px;
      background: radial-gradient(130% 130% at 20% 0%, var(--brand), transparent 30%),
                  radial-gradient(140% 130% at 80% 120%, var(--brand-2), transparent 40%),
                  radial-gradient(130% 120% at 50% 50%, var(--brand-3), transparent 35%);
      box-shadow: 0 0 0 1px rgba(255,255,255,.06), 0 10px 30px rgba(0,0,0,.35);
    }
    .brand span{font-family:"Space Grotesk",Inter,sans-serif; font-weight:700; letter-spacing:.3px}
    .nav a.link{color:var(--muted); text-decoration:none; margin:0 10px; font-weight:600}
    .nav a.link:hover{color:var(--txt)}

    /* hero */
    .hero{
      position:relative; padding:96px 0 56px;
      background-image: var(--grad);
      background-size: 200% 200%;
      animation: swirl 18s linear infinite;
      border-bottom: var(--border);
    }
    @keyframes swirl{0%{background-position:0% 50%} 50%{background-position:100% 50%} 100%{background-position:0% 50%}}
    .blob{
      position:absolute; inset: -20% -30% auto auto;
      width: 700px; height: 700px; border-radius: 50%;
      filter: blur(70px) saturate(160%); opacity:.25;
      background: radial-gradient(40% 40% at 40% 40%, var(--brand), transparent),
                  radial-gradient(40% 40% at 60% 60%, var(--brand-2), transparent);
      pointer-events:none;
    }
    h1{
      font-family:"Space Grotesk",Inter,sans-serif;
      font-size: clamp(2rem, 3.5vw, 3.6rem);
      line-height:1.05; margin:0 0 16px;
      letter-spacing:.2px;
    }
    .lead{color:var(--muted); font-size: clamp(1rem, 1.2vw, 1.15rem)}
    .cta{display:flex; gap:12px; flex-wrap:wrap; margin-top:26px}
    .btn{
      border:var(--border); border-radius:14px; padding:12px 16px; cursor:pointer;
      color:var(--txt); background:linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
      box-shadow:var(--shadow);
      display:inline-flex; align-items:center; gap:10px; font-weight:700; text-decoration:none;
    }
    .btn.primary{background:linear-gradient(180deg, rgba(0,255,163,.22), rgba(10,13,18,.22));
      border:1px solid rgba(0,255,163,.5)}
    .btn:hover{transform:translateY(-1px)}
    .tag{
      display:inline-block; padding:6px 10px; border-radius:999px; font-size:.8rem; font-weight:700;
      background:linear-gradient(90deg, rgba(122,224,255,.2), rgba(155,140,255,.2));
      border:1px solid rgba(255,255,255,.08); color:#dff6ff; margin-bottom:10px
    }

    /* sections */
    section{padding:72px 0; border-bottom:var(--border)}
    .grid{display:grid; gap:20px}
    .two{grid-template-columns: repeat(auto-fit, minmax(280px,1fr))}
    .three{grid-template-columns: repeat(auto-fit, minmax(260px,1fr))}
    .card{
      background: var(--panel); backdrop-filter: blur(12px) saturate(140%);
      border: var(--border); border-radius: var(--radius); padding: var(--card); box-shadow: var(--shadow)
    }
    .card h3{margin:.2rem 0 10px; font-family:"Space Grotesk",Inter,sans-serif; letter-spacing:.2px}
    .muted{color:var(--muted)}
    code,.code{
      font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
      background: #0b0f16; border:1px solid rgba(255,255,255,.07); border-radius: 10px;
      padding: 12px; display:block; overflow:auto; color:#e5f4ff
    }
    pre{margin:0}
    .mini{font-size:.92rem}
    .k{color:#91f2ff}
    .v{color:#c7b5ff}
    .g{color:#9fffcf}
    .copy{
      position:absolute; top:10px; right:10px; border:var(--border);
      background:#0c1118; padding:6px 10px; border-radius:10px; color:var(--muted); cursor:pointer
    }
    .stack{display:flex; flex-direction:column; gap:10px}
    .list{display:grid; gap:10px; grid-template-columns:repeat(auto-fit,minmax(240px,1fr))}
    .pill{border:1px solid rgba(255,255,255,.09); padding:8px 10px; border-radius:12px; background:#0d1119}
    details{border:var(--border); border-radius:12px; padding:10px 12px; background:#0d1118}
    summary{cursor:pointer; font-weight:700}
    .foot{padding:40px 0; color:var(--muted); text-align:center; font-size:.9rem}
    .success{color:var(--ok)}
    .danger{color:var(--error)}
    .tiny{font-size:.85rem}

    /* scheduler demo */
    .sched{display:grid; gap:14px; grid-template-columns: 1.1fr .9fr}
    .bar{height:14px; border-radius:999px; overflow:hidden; background:#0f1420; border:1px solid rgba(255,255,255,.08)}
    .bar > span{display:block; height:100%; background:linear-gradient(90deg, var(--brand-3), var(--brand)); width:0%}
    .key{display:flex; gap:10px; align-items:center}
    .dot{width:10px; height:10px; border-radius:999px; background:var(--brand-3); border:1px solid rgba(255,255,255,.5)}
    .dot2{background:var(--brand)}
    .row{display:flex; gap:12px; align-items:center; flex-wrap:wrap}
    .select, .input{
      background:#0d1118; color:var(--txt); border:1px solid rgba(255,255,255,.12); border-radius:10px;
      padding:10px 12px; min-width:160px
    }
    .kbd{font-family:ui-monospace,monospace; font-size:.85rem; border:1px solid rgba(255,255,255,.15); padding:2px 6px; border-radius:8px; background:#0a0e14}
    .badge{padding:6px 10px; border:1px solid rgba(255,255,255,.12); border-radius:999px}
    /* small screens */
    @media (max-width:860px){ .sched{grid-template-columns:1fr} }
  </style>
</head>
<body>

  <!-- NAV -->
  <div class="nav">
    <div class="wrap in">
      <a class="brand" href="#">
        <div class="logo" aria-hidden="true"></div>
        <span>Aura Engine</span>
      </a>
      <div>
        <a class="link" href="#about">About</a>
        <a class="link" href="#architecture">Architecture</a>
        <a class="link" href="#atoms">Atoms & Modules</a>
        <a class="link" href="#pipelines">Pipelines</a>
        <a class="link" href="#privacy">Privacy</a>
      </div>
      <button class="btn" id="walletBtn" aria-label="Connect wallet">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M3 7a2 2 0 0 1 2-2h12a4 4 0 0 1 4 4v6a4 4 0 0 1-4 4H5a2 2 0 0 1-2-2V7Z" stroke="currentColor" stroke-width="1.5"/><path d="M17 10h3v4h-3a2 2 0 0 1-2-2v0a2 2 0 0 1 2-2Z" stroke="currentColor" stroke-width="1.5"/></svg>
        <span id="walletText">Connect</span>
      </button>
    </div>
  </div>

  <!-- HERO -->
  <header class="hero">
    <div class="blob"></div>
    <div class="wrap">
      <span class="tag">Fractal • Local-first • Web3 trust • Multimodal AI</span>
      <h1>The inner & embodied self — <br/>observed, fractionalised, patterned by choice, externalised, then re-embodied.</h1>
      <p class="lead">Aura Engine is a player-built course where you generate your own data, then assemble <strong>Mixture-of-Experts (MoE)</strong> pipelines to choreograph your days. Everything is an atom. Explode, slice, fuse, and hot-swap your life in microticks — with federated privacy and consent on chain.</p>
      <div class="cta">
        <a class="btn primary" href="#get-started">Get Started</a>
        <a class="btn" href="#roadmap">Roadmap</a>
      </div>
    </div>
  </header>

  <!-- ABOUT -->
  <section id="about" class="wrap">
    <div class="grid two">
      <article class="card">
        <h3>What is it?</h3>
        <p class="muted">A local-first, open-source website + starter stack where learners drag pre-categorised <em>atoms</em> (5–15 minute units) into days/weeks; the scheduler protects fixed blocks (e.g., <span class="kbd">HBOT 120m</span>) and fills remaining microticks with context-aware work, wellness, XR, and reflection.</p>
        <ul class="list">
          <li class="pill">Pre-categorised library (Core + Electives)</li>
          <li class="pill">DnD timeline composer</li>
          <li class="pill">MoE agent DAG</li>
          <li class="pill">Dimensional data stores (tabular + vector + blobs)</li>
          <li class="pill">SIWE + DID, encrypted exports</li>
        </ul>
      </article>
      <article class="card">
        <h3>Mantra</h3>
        <p class="muted">Coach people to fractionalise their own data and synchronise it across modalities for GenAI — with Web3 trust and federated privacy. That turns life into a game that actually respects the player.</p>
        <details><summary>Design principles</summary>
          <div class="stack">
            <span class="pill">Everything is an atom</span>
            <span class="pill">Explode / Slice / Fuse</span>
            <span class="pill">Interrupt-friendly scheduling</span>
            <span class="pill">Consent-first, defaults private</span>
            <span class="pill">Readable JSON everywhere</span>
          </div>
        </details>
      </article>
    </div>
  </section>

  <!-- ARCHITECTURE -->
  <section id="architecture" class="wrap">
    <h2 style="font-family:'Space Grotesk',Inter,sans-serif;letter-spacing:.2px">Architecture overview</h2>
    <div class="grid three" style="margin-top:14px">
      <div class="card">
        <h3>Frontend</h3>
        <p class="muted">Next.js / React, Tailwind, shadcn/ui, Framer Motion. Timeline composer with DnD; DAW-like rows per modality; copyable JSON.</p>
      </div>
      <div class="card">
        <h3>Data Plane</h3>
        <p class="muted">Postgres (tabular), Qdrant (vector), IPFS/S3 (blobs). Local-first CRDT cache; one-click encrypted export.</p>
      </div>
      <div class="card">
        <h3>Agents & MoE</h3>
        <p class="muted">normalise → schedule → culture → place → bio → xr → recommender → reflect. All agents share a simple JSON contract.</p>
      </div>
    </div>
    <div class="card" style="margin-top:16px">
      <details open>
        <summary>Agent I/O (TypeScript interface)</summary>
        <pre class="code mini"><code>// Agent contract
type FeaturePack = Record&lt;string, unknown&gt;;
type AgentInput = { features: FeaturePack, context?: Record&lt;string,unknown&gt; };
type AgentOutput = { events?: any[]; recommendations?: any[]; artifacts?: any[] };
type AgentFn = (input: AgentInput) =&gt; Promise&lt;AgentOutput&gt;;</code></pre>
      </details>
    </div>
  </section>

  <!-- ATOMS & MODULES -->
  <section id="atoms" class="wrap">
    <h2 style="font-family:'Space Grotesk',Inter,sans-serif">Atoms & Modules</h2>
    <p class="muted">Atoms are 5–15 minute micro-units (communication cues, place checks, breath sets, journal prompts, XR steps). Modules are curated bundles of atoms.</p>

    <div class="grid two" style="margin-top:14px">
      <div class="card" style="position:relative">
        <button class="copy" data-copy="atom">Copy</button>
        <h3>Atom (JSON)</h3>
        <pre class="code mini" id="atom"><code>{
  <span class="k">"id"</span>: <span class="v">"culture.greetings"</span>,
  <span class="k">"title"</span>: <span class="v">"Greetings & Introductions"</span>,
  <span class="k">"intention"</span>: [<span class="v">"community"</span>, <span class="v">"appropriateness"</span>],
  <span class="k">"type"</span>: <span class="v">"atom"</span>,
  <span class="k">"time_block"</span>: <span class="v">"micro"</span>,
  <span class="k">"format"</span>: [<span class="v">"mental"</span>, <span class="v">"field"</span>],
  <span class="k">"location"</span>: [<span class="v">"urban"</span>, <span class="v">"nature"</span>, <span class="v">"home"</span>, <span class="v">"digital"</span>],
  <span class="k">"outputs"</span>: [<span class="v">"etiquette_checklist.md"</span>],
  <span class="k">"filters"</span>: [<span class="v">"logical"</span>, <span class="v">"emotional"</span>, <span class="v">"rational"</span>],
  <span class="k">"hooks"</span>: [<span class="v">"feature_store:culture"</span>, <span class="v">"agent:culture"</span>, <span class="v">"scheduler"</span>],
  <span class="k">"privacy"</span>: <span class="v">"private"</span>
}</code></pre>
      </div>

      <div class="card" style="position:relative">
        <button class="copy" data-copy="module">Copy</button>
        <h3>Module (bundle)</h3>
        <pre class="code mini" id="module"><code>{
  <span class="k">"id"</span>: <span class="v">"module.lesser_understood_place"</span>,
  <span class="k">"title"</span>: <span class="v">"Visit a Lesser-Understood Place"</span>,
  <span class="k">"type"</span>: <span class="v">"core"</span>,
  <span class="k">"atoms"</span>: [
    <span class="v">"culture.greetings"</span>,
    <span class="v">"culture.body_language"</span>,
    <span class="v">"place.local_table_pull"</span>,
    <span class="v">"time.sun_moon_align"</span>,
    <span class="v">"social.action_planner"</span>
  ],
  <span class="k">"suggested_duration"</span>: <span class="v">"short"</span>,
  <span class="k">"outputs"</span>: [<span class="v">"location_brief.pdf"</span>, <span class="v">"consent_notes.json"</span>]
}</code></pre>
      </div>
    </div>
  </section>

  <!-- PIPELINES -->
  <section id="pipelines" class="wrap">
    <h2 style="font-family:'Space Grotesk',Inter,sans-serif">Pipelines (player-built)</h2>
    <p class="muted">Learners wire their own DAG: <strong>Intake → Normalise → Feature Store → Agents → Composer → Calendar → Reflection</strong>.</p>

    <div class="card" style="position:relative">
      <button class="copy" data-copy="pipeline">Copy</button>
      <h3>Pipeline Preset (JSON)</h3>
      <pre class="code mini" id="pipeline"><code>{
  <span class="k">"name"</span>: <span class="v">"my_directional_pipeline_v1"</span>,
  <span class="k">"nodes"</span>: [
    {<span class="k">"id"</span>:<span class="v">"intake"</span>, <span class="k">"type"</span>:<span class="v">"collector"</span>, <span class="k">"sources"</span>:[<span class="v">"journal"</span>,<span class="v">"voice"</span>,<span class="v">"xr"</span>,<span class="v">"bio"</span>]},
    {<span class="k">"id"</span>:<span class="v">"normaliser"</span>, <span class="k">"type"</span>:<span class="v">"agent.normalise"</span>, <span class="k">"in"</span>:[<span class="v">"intake"</span>], <span class="k">"out"</span>:[<span class="v">"features"</span>]},
    {<span class="k">"id"</span>:<span class="v">"features"</span>, <span class="k">"type"</span>:<span class="v">"store.vector+tabular"</span>},
    {<span class="k">"id"</span>:<span class="v">"scheduler"</span>, <span class="k">"type"</span>:<span class="v">"agent.schedule"</span>, <span class="k">"in"</span>:[<span class="v">"features"</span>]},
    {<span class="k">"id"</span>:<span class="v">"culture"</span>,   <span class="k">"type"</span>:<span class="v">"agent.culture"</span>,   <span class="k">"in"</span>:[<span class="v">"features"</span>]},
    {<span class="k">"id"</span>:<span class="v">"place"</span>,     <span class="k">"type"</span>:<span class="v">"agent.place"</span>,     <span class="k">"in"</span>:[<span class="v">"features"</span>]},
    {<span class="k">"id"</span>:<span class="v">"bio"</span>,       <span class="k">"type"</span>:<span class="v">"agent.bio"</span>,       <span class="k">"in"</span>:[<span class="v">"features"</span>]},
    {<span class="k">"id"</span>:<span class="v">"composer"</span>,  <span class="k">"type"</span>:<span class="v">"agent.compose"</span>,   <span class="k">"in"</span>:[<span class="v">"scheduler"</span>,<span class="v">"culture"</span>,<span class="v">"place"</span>,<span class="v">"bio"</span>]},
    {<span class="k">"id"</span>:<span class="v">"reflect"</span>,   <span class="k">"type"</span>:<span class="v">"agent.reflect"</span>,   <span class="k">"in"</span>:[<span class="v">"features"</span>,<span class="v">"composer"</span>]}
  ],
  <span class="k">"ticks"</span>: { <span class="k">"size_minutes"</span>: <span class="g">10</span>, <span class="k">"guardrails"</span>: [<span class="v">"HBOT_120m_daily"</span>] },
  <span class="k">"signals"</span>: [<span class="v">"satisfaction"</span>,<span class="v">"fatigue"</span>,<span class="v">"context_switch_cost"</span>],
  <span class="k">"consent"</span>: { <span class="k">"share"</span>: <span class="v">"none"</span> }
}</code></pre>
    </div>

    <!-- Tiny interactive scheduler demo -->
    <div class="card" style="margin-top:16px">
      <h3>Microtick Scheduler (demo)</h3>
      <p class="muted tiny">A tiny simulation to visualise available minutes after reserving your daily HBOT block.</p>
      <div class="sched">
        <div>
          <div class="row">
            <label>Game frequency</label>
            <select id="mode" class="select">
              <option value="casual">Casual (1–2h/day)</option>
              <option value="busy">Busy (3–4h/day)</option>
              <option value="hyper">Hyper Busy (5–6h/day)</option>
              <option value="part">Part-Time (3 days/wk)</option>
              <option value="full">Full-Time (6 days/wk)</option>
              <option value="immersion">Immersion (7 days/wk)</option>
            </select>
            <label>Microtick (min)</label>
            <input id="tick" class="input" type="number" min="5" max="30" step="5" value="10" />
          </div>
          <div class="row" style="margin-top:10px">
            <span class="badge">HBOT reserved: <strong>120</strong> min/day</span>
            <span class="badge">Working window: <strong id="hrs">2</strong> h/day</span>
            <span class="badge">Available microticks: <strong id="ticks">0</strong></span>
          </div>
          <div style="margin-top:12px">
            <div class="bar" title="Proportion filled by available time">
              <span id="fill" style="width:0%"></span>
            </div>
            <div class="key" style="gap:16px;margin-top:10px">
              <div class="key"><span class="dot"></span><small>Available</small></div>
              <div class="key"><span class="dot dot2"></span><small>Used/Reserved</small></div>
            </div>
          </div>
        </div>
        <div>
          <details open>
            <summary>How it works</summary>
            <p class="muted tiny">Select a frequency and microtick size. The demo assumes a daily planning window of <em>modeHours/day</em>, then subtracts the fixed HBOT block (120 min). It shows remaining microticks for atoms (5–15 min units). The real engine also applies location/device constraints, priorities, and context-switch costs.</p>
            <ul class="tiny">
              <li>Casual 2h/day • Busy 4h/day • Hyper 6h/day</li>
              <li>Part-Time 3d/wk@4h • Full-Time 6d/wk@4h • Immersion 7d/wk@6h</li>
            </ul>
          </details>
        </div>
      </div>
    </div>
  </section>

  <!-- PRIVACY -->
  <section id="privacy" class="wrap">
    <h2 style="font-family:'Space Grotesk',Inter,sans-serif">Privacy, Trust, Federation</h2>
    <div class="grid two">
      <div class="card">
        <h3>Local-first by default</h3>
        <p class="muted">CRDT docs remain on device; opt-in sync to your personal node. One-click encrypted export (JSON/CSV/media/IPFS CIDs). No dark patterns.</p>
      </div>
      <div class="card">
        <h3>Web3 consent</h3>
        <p class="muted">Sign-In with Ethereum (SIWE) + DID. On-chain <em>ConsentRegistry</em> logs hashed grants/revokes. Non-transferable SBTs prove authored <em>Module Decks</em> and <em>Pipeline Presets</em> without leaking data.</p>
      </div>
    </div>
  </section>

  <!-- GET STARTED -->
  <section id="get-started" class="wrap">
    <h2 style="font-family:'Space Grotesk',Inter,sans-serif">Get started</h2>
    <div class="grid two">
      <div class="card" style="position:relative">
        <button class="copy" data-copy="readme">Copy</button>
        <h3>Repo bootstrap</h3>
        <pre class="code mini" id="readme"><code>git clone &lt;your-repo&gt; aura-engine
cd aura-engine
# Web app (Next.js) would live in /apps/web
# This static file is the stepping stone landing.
</code></pre>
      </div>
      <div class="card">
        <h3>Batch-1 (first week)</h3>
        <ol class="tiny">
          <li>Choose a frequency preset; reserve HBOT 120m daily.</li>
          <li>Each day: 1 core module + 1–2 micro atoms.</li>
          <li>End-of-day: reflection (text/voice) → local features.</li>
          <li>Weekend: assemble your first pipeline preset; run a 3-day sim.</li>
        </ol>
      </div>
    </div>
  </section>

  <!-- ROADMAP -->
  <section id="roadmap" class="wrap">
    <h2 style="font-family:'Space Grotesk',Inter,sans-serif">Roadmap</h2>
    <div class="grid three">
      <div class="card">
        <h3>Phase 1 — MVP</h3>
        <p class="muted">Static library, simple scheduler, encrypted exports, this site.</p>
      </div>
      <div class="card">
        <h3>Phase 2 — Agent DAG</h3>
        <p class="muted">Normaliser, vector store, recommendations, calendar composer.</p>
      </div>
      <div class="card">
        <h3>Phase 3 — Federation</h3>
        <p class="muted">Personal nodes, consent registry, SBT proofs, community packs.</p>
      </div>
    </div>
  </section>

  <footer class="foot">
    <p>© Aura Engine. Built for humans who want to design their own lives. <span class="muted">Local-first • Consent-first • Joy-first.</span></p>
  </footer>

  <script>
    // Wallet connect (basic)
    const walletBtn = document.getElementById('walletBtn');
    const walletText = document.getElementById('walletText');
    walletBtn?.addEventListener('click', async () => {
      if (!window.ethereum) {
        walletText.textContent = 'No wallet';
        walletBtn.classList.add('danger');
        return;
      }
      try {
        const [addr] = await window.ethereum.request({ method: 'eth_requestAccounts' });
        walletText.textContent = addr ? (addr.slice(0,6)+'…'+addr.slice(-4)) : 'Connected';
        walletBtn.classList.add('success');
      } catch (e) {
        walletText.textContent = 'Declined';
      }
    });

    // Copy buttons for code blocks
    document.querySelectorAll('.copy').forEach(btn => {
      btn.addEventListener('click', () => {
        const id = btn.getAttribute('data-copy');
        const el = document.getElementById(id);
        if (!el) return;
        const text = el.innerText;
        navigator.clipboard.writeText(text).then(() => {
          const old = btn.textContent;
          btn.textContent = 'Copied';
          setTimeout(() => btn.textContent = old, 1200);
        });
      });
    });

    // Microtick scheduler demo
    const modeEl = document.getElementById('mode');
    const tickEl = document.getElementById('tick');
    const hrsEl = document.getElementById('hrs');
    const ticksEl = document.getElementById('ticks');
    const fill = document.getElementById('fill');

    const HBOT_MIN = 120;
    function calc(){
      const m = modeEl.value;
      const tick = Math.max(5, Math.min(30, parseInt(tickEl.value||10,10)));
      // Mode -> hours/day (simplified)
      const hours = (m==='casual') ? 2
                   : (m==='busy') ? 4
                   : (m==='hyper') ? 6
                   : (m==='part') ? (4)   // show daily window; part-time uses fewer days
                   : (m==='full') ? 4
                   : /* immersion */      6;
      const totalMin = hours*60;
      const usable = Math.max(0, totalMin - HBOT_MIN); // protect HBOT
      const micro = Math.floor(usable / tick);
      hrsEl.textContent = hours.toString();
      ticksEl.textContent = micro.toString();
      const pct = Math.min(100, (usable/Math.max(1,totalMin))*100);
      fill.style.width = pct + '%';
    }
    modeEl.addEventListener('change', calc);
    tickEl.addEventListener('input', calc);
    calc();
  </script>
</body>
</html>
